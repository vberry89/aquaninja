 <!DOCTYPE html>

<html lang="en">

<head>

  <title>Aqua Ninja</title>

  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>

<body>


<nav class="navbar navbar-default">
	<div class="container-fluid">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<a class="navbar-brand" href="#">Shower Challenge</a>
		</div>
		<div id="navbar" class="navbar-collapse collapse">
			<ul class="nav navbar-nav">
				<li><a href="index.html">Home</a></li>
				<li><a href="dashboard.html">Dashboard</a></li>
				<li><a href="#">Contact</a></li>
				<li><button id="send" type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Open Modal</button></li>
			</ul>

		</div><!--/.nav-collapse -->
	</div><!--/.container-fluid -->
</nav>

<div class="container">
	<div class="row">

		<svg id="svgtotal" style="padding-left:90px" class="loading" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
			 width="234.218px" height="240px"  xml:space="preserve">
		  <defs>
			<pattern id="water" width=".25" height="1.1" patternContentUnits="objectBoundingBox">
			  <path fill="#40a4df" d="M0.25,1H0c0,0,0-0.659,0-0.916c0.083-0.303,0.158,0.334,0.25,0C0.25,0.327,0.25,1,0.25,1z"/>
			</pattern>
		
			<rect x="0" y="0" width="100%" height="240" fill="#EFEFEF" stroke="grey" stroke-width="5" id="text" />
			<mask id="text-mask">
			  <use x="0" y="0" xlink:href="#text" opacity="1" fill="#ffffff"/>
			</mask>
		  </defs>
			  <use x="0" y="0" xlink:href="#text" fill="#EEE"/>
			
		  <rect class="water-fill" mask="url(#text-mask)" fill="url(#water)" x="0" y="0" width="400" height="300"/>
				<line id="lineplayer1" x1="0" y1="200" x2="174" y2="200" style="stroke:rgb(155,155,155);stroke-width:2" />
			  
			  <line id="lineplayer2" x1="0" y1="100" x2="174" y2="100" style="stroke:rgb(155,155,155);stroke-width:2" />
			  
			  <line id="lineplayer3" x1="0" y1="20" x2="174" y2="20" style="stroke:rgb(155,155,155);stroke-width:2" />
		  
				<line id="lineplayerme" x1="0" y1="0" x2="174" y2="0" style="stroke:rgb(155,155,155);stroke-width:2" />
			  
		</svg>

      
  
	</div>
 </div>
 
<div id="playerdiv" class="player1" style="">
          &nbsp; <span class="place">1</span><span class="glyphicon glyphicon-triangle-right"></span>
        </div>



<div id="playerdiv" class="player2" >
<span class="place">2</span><span class="glyphicon glyphicon-triangle-right"></span></div>




<div id="playerdiv" class="player3"><span class="place">3</span><span class="glyphicon glyphicon-triangle-right"></span></div>




<div id="playerdiv" class="you">
	<!--<a href="#" class="btn btn-info btn-lg">-->
          <span class="glyphicon glyphicon-triangle-left"></span>
	<span class="place">1st</span>
        <!--</a>-->
</div>


    <div class="row" style="max-width:350px;">

    
      <div class="col-md-12 text-center">
	
			<br>
		  <hr />
			<!--<div style="font-weight:bold;">Hello</div>-->
		  <h2 class="winner-subtitle"> <span id="score"> <b>Mario</b></span> Litres</h2>
		  <h3 ><span id="score2"> <b>Mario</b></span> &euro;</h3>

			<!--<div id="score2">ello</div>-->
		
		</div>
	</div>


<!-- Modal -->
<div id="myModal" class="modal-dialog modal-sm fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">No Water detected, waiting <span id="waiting">40</span> Seconds</h4>
      </div>
      <div class="modal-body">
        <p>Hey Ivan, we are sorry but you are the most politient guy in your competition group.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>


</body>

</html>

<style>

body {
  background #fff
  text-align center
}
.loading {
  margin-top 20px
}
.player1 {
	position:fixed;
	width:80px;
	height:50px;
	background-image:url("https://aquaninja.herokuapp.com/img/mario.png");
	background-size: 50px 50px;
background-repeat:no-repeat;
text-align:right;
vertical-align:middle;

}
.player2 {
	position:fixed;
	width:80px;
	height:50px;
	text-align:right;vertical-align:middle;
	background-repeat:no-repeat;
	background-image:url("https://aquaninja.herokuapp.com/img/verena.png");
	background-size: 50px 50px;

}
.player3 {
	position:fixed;
	width:80px;
	height:50px;
	background-image:url("https://aquaninja.herokuapp.com/img/mirco.png");
	background-size: 50px 50px;
	background-repeat:no-repeat;
	text-align:right;vertical-align:middle;
}
.you {
	width:80px;
	height:50px;
	position:fixed;
	background-image:url("https://aquaninja.herokuapp.com/img/ivan1.jpg");
	background-size: 50px 50px;
	background-repeat:no-repeat;
	text-align:right;vertical-align:middle;
}
  
  </style>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/1.18.0/TweenMax.min.js"></script>
<link href='https://fonts.googleapis.com/css?family=Cabin+Condensed:700' rel='stylesheet' type='text/css'>

 <script>
 
 function calc_places() {
	
	
 
 
 }
 function redir() {
 document.location.href = "https://aquaninja.herokuapp.com/results";
 }
 var navbarheight;
 $( document ).ready(function() {
 $('#myModal').on('shown.bs.modal', function () {
	$("[data-modalfocus]", this).focus();
})

   	
	 navbarheight = $("#navbar").height();
    console.log( "ready!" );
	//alert($("#lineplayer1").position().top);
	z = parseInt($(".player1").width());
	var over_first = false;
	var over_first_number = 50;
	
	
	var over_second = false;
	var over_second_number = 80;
	
	
	var over_third = false;
	var over_third_number = 90;
	
	
	 var counter = { var: 0 };
 TweenMax.to(counter, 20, {
      var: 85.15, 
      onUpdate: function () {
    //      console.log(Math.ceil(counter.var));
		  if (over_first == false && counter.var > over_first_number) {
			over_first = true;
			$(".you .place").html("2nd");
		  }
		   if (over_first == true && over_second == false && counter.var > over_second_number) {
			over_second = true;
			$(".you .place").html("3rd");
		  }
		   if (over_first == true && over_second == true && over_third == false && counter.var > over_third_number) {
			over_third = true;
			$(".you .place").html("4");
		  }
		  if(counter.var == 85.15) {
			//alert("OPEN");
			//t1.stop();
    //      console.log(Math.ceil(counter.var));
			//$('#myModal').modal('show');
			 //$("#send").click();
			 
			//document.location.href = "https://aquaninja.herokuapp.com/results";
			myVar = setTimeout(redir, 8000);
		  }
          $("#score").html((counter.var).toFixed(2));
          $("#score2").html((counter.var * 0.0167).toFixed(2));
      },
      ease:Circ.easeOut
  });
   var countdown = { var: 40 };
 TweenMax.to(countdown, 0, {
  
      onUpdate: function () {
    //      console.log(Math.ceil(counter.var));
		 
		   if (countdown.var <= 0) {
			//alert("OVER");
		  }
          $("#waiting").html(countdown.var);
      },
      ease:Circ.easeOut
  });
	
	$(".player1").css("top",$("#lineplayer1").position().top + "px");
	$(".player1").css("left",($("#lineplayer1").position().left - z) + "px");
	 console.log( "ready1!" );
	
	//z = parseInt($("#lineplayer2").attr("x2"));
	z = parseInt($(".player2").width());
	
	$(".player2").css("top",$("#lineplayer2").position().top + "px");
	$(".player2").css("left",($("#lineplayer2").position().left - z) + "px");
	 console.log( "ready3!" );
	
	z = parseInt($(".player3").width());
	
	$(".player3").css("top",$("#lineplayer3").position().top + "px");
	$(".player3").css("left",($("#lineplayer3").position().left - z) + "px");
	
	
	
	z = parseInt($("#lineplayer2").attr("x2"));
	
	$(".you").css("top", ($("#svgtotal").position().top + $("#svgtotal").height()) - ($("#playerdiv").height() / 2) + "px");
	$(".you").css("left",($("#lineplayer3").position().left + z) + "px");
});

  document.addEventListener("DOMContentLoaded",function(){
  var fill=document.querySelector(".water-fill");
  var you=document.querySelector(".you");
  var x = TweenMax.fromTo(fill,1.1,{
    attr:{
      x:-190
    }
  },
  {
    attr:{
      x:0,
    },
    repeat:20,
    ease:Linear.easeNone
  });
  
  
  TweenMax.to(you, 20, {top:"100px", repeat:0, yoyo:true, repeatDelay:0.5, ease:Linear.easeNone});
  
  TweenMax.fromTo(fill,20,{
    attr:{
      y:240,
      height:0
    },
  },{
    attr:{
      y:0,
      height:240
    },
    repeat:0,
    yoyo:true,
    ease:Linear.easeNone
  });
  
});
</script>